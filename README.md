# ğŸŒˆ Toy Project : ê¸€ë§ˆë””

### â–ªï¸ í”„ë¡œì íŠ¸ ì†Œê°œ

> ì±…ì´ë‚˜ ë…¸ë˜ì—ì„œ ë°œê²¬í•œ ì¸ìƒì ì¸ ë¬¸êµ¬ë‚˜ ê°€ì‚¬ë¥¼ ê¸°ë¡í•˜ê³ , ì„œë¡œ ê³µìœ í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
> â€˜ê¸€ë§ˆë””â€™ëŠ” ê¸€ êµ¬ì ˆì˜ ìˆœìš°ë¦¬ë§ì…ë‹ˆë‹¤.

### â–ªï¸ í”„ë¡œì íŠ¸ ê¸°ê°„(ì•½ nì¼)

- 2023.04.05 ~

<!-->

### â–ªï¸ í”„ë¡œì íŠ¸ ê°œìš”

- [DEMO](https://603ce6b8d579f1f8067c72df--teta-cardmaker.netlify.app/)
- [velog í”„ë¡œì íŠ¸ íšŒê³ ](https://velog.io/@ichbinmin2/Toy-Project-Tetas-Card-Maker)

### â–ªï¸ ê¸°ìˆ  ìŠ¤íƒ

- ReactJS / React-Hooks / PostCss
- Firebase / Cloudinary
- JavaScript(ES6) / HTML

### â–ªï¸ ì§„í–‰ ë„êµ¬

- Notion (í”„ë¡œì íŠ¸ ê¸°ëŠ¥ êµ¬í˜„ ê³„íšê³¼ ì¼ì • ê´€ë¦¬)
  <img width="854" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-03-01 á„‹á…©á„’á…® 11 03 23" src="https://user-images.githubusercontent.com/53133662/109507774-6aec4a00-7ae2-11eb-9ee7-3c1253dbe103.png">

- Git + [GitHub](https://github.com/ichbinmin2/teta_CardMaker)

## â–ªï¸ ğŸ§© ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```bash
src
â”œâ”€â”€ app.jsx
â”œâ”€â”€ app.module.css
â”œâ”€â”€ common
â”‚   â”œâ”€â”€ colors.css
â”‚   â”œâ”€â”€ reset.css
â”‚   â””â”€â”€ size.css
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ button
â”‚   â”‚   â”œâ”€â”€ button.jsx
â”‚   â”‚   â””â”€â”€ button.module.css
â”‚   â”œâ”€â”€ card-add
â”‚   â”‚   â”œâ”€â”€ card-add.jsx
â”‚   â”‚   â””â”€â”€ card-add.module.css
â”‚   â”œâ”€â”€ card-box
â”‚   â”‚   â”œâ”€â”€ card-box.jsx
â”‚   â”‚   â””â”€â”€ card-box.module.css
â”‚   â”œâ”€â”€ card-edit
â”‚   â”‚   â”œâ”€â”€ card-edit.jsx
â”‚   â”‚   â””â”€â”€ card-edit.module.css
â”‚   â”œâ”€â”€ card-editor
â”‚   â”‚   â”œâ”€â”€ card-editor.jsx
â”‚   â”‚   â””â”€â”€ card-editor.module.css
â”‚   â”œâ”€â”€ card-maker
â”‚   â”‚   â”œâ”€â”€ card-maker.jsx
â”‚   â”‚   â””â”€â”€ card-maker.module.css
â”‚   â”œâ”€â”€ card-preview
â”‚   â”‚   â”œâ”€â”€ card-preview.jsx
â”‚   â”‚   â””â”€â”€ card-preview.module.css
â”‚   â”œâ”€â”€ footer
â”‚   â”‚   â”œâ”€â”€ footer.jsx
â”‚   â”‚   â””â”€â”€ footer.module.css
â”‚   â”œâ”€â”€ image_input
â”‚   â”‚   â”œâ”€â”€ image_input.jsx
â”‚   â”‚   â””â”€â”€ image_input.module.css
â”‚   â”œâ”€â”€ login
â”‚   â”‚   â”œâ”€â”€ login.jsx
â”‚   â”‚   â””â”€â”€ login.module.css
â”‚   â””â”€â”€ nav
â”‚       â”œâ”€â”€ nav.jsx
â”‚       â””â”€â”€ nav.module.css
â”œâ”€â”€ index.js
â”œâ”€â”€ index.module.css
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ main.jsx
â”‚   â”œâ”€â”€ main.module.css
â”‚   â”œâ”€â”€ mainBoard.jsx
â”‚   â””â”€â”€ mainBoard.module.css
â””â”€â”€ service
    â”œâ”€â”€ auth_service.js
    â”œâ”€â”€ card_repository.js
    â”œâ”€â”€ firebase.js
    â””â”€â”€ image_uploader.js
```

<br />

### â–ªï¸ êµ¬í˜„í•œ ê¸°ëŠ¥

- React-hooks, CSS(PostCSS) ì‚¬ìš©
- Routerë¥¼ ì‚¬ìš©í•œ í˜ì´ì§€ ì´ë™ êµ¬í˜„
- Firebase Authenticationì„ ì´ìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ ì¸ì¦ êµ¬í˜„
- Firebase realtime databaseë¥¼ ì‚¬ìš©í•œ ì¹´ë“œ ë°ì´í„° ì €ì¥ ê´€ë¦¬
- Cloudinary ë¥¼ ì´ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë” ê¸°ëŠ¥ êµ¬í˜„
- Dependency Injectionì„ í†µí•œ API ë³´ì•ˆ ê´€ë¦¬
- cursor ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„
- ë„í˜• ì• ë‹ˆë©”ì´ì…˜ ë° ë°˜ì‘í˜• ì›¹í˜ì´ì§€ êµ¬í˜„

<br />

### â–ªï¸ êµ¬í˜„ ê¸°ëŠ¥ ìš”ì•½

#### 1) ì†Œì…œ ë¡œê·¸ì¸ (Firebase Authentication)

> ì§„í–‰ê³¼ì • ì°¸ì¡° (íšŒê³ )
> [TIL. Firebaseë¥¼ ì´ìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„(1)](https://velog.io/@ichbinmin2/TIL.-Firebase%EC%9D%98) > [TIL. Firebaseë¥¼ ì´ìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„(2)](https://velog.io/@ichbinmin2/TIL.-Firebase%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B5%AC%ED%98%842)

- Firebase Authentication ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ êµ¬ê¸€, ê¹ƒí—ˆë¸Œ ì†Œì…œ ë¡œê·¸ì¸ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. Firebase ë¥¼ Add í•  ë•Œ ì—­ì‹œ, ì§€ë‚œ í† ì´ í”„ë¡œì íŠ¸ì—ì„œ ì§„í–‰í–ˆë˜ ê²ƒê³¼ ë™ì¼í•˜ê²Œ Dependency Injectionë¥¼ ì ê·¹ í™œìš©í•˜ì—¬ API ë³´ì•ˆ ê´€ë¦¬ë¥¼ ì§„í–‰í•˜ê³ ì .env íŒŒì¼ ì•ˆì—ì„œ API Keyë¥¼ ì‘ì„±í•˜ê³  ì „ì²´ì ìœ¼ë¡œ firebase APIë¥¼ ë°›ì•„ì˜¤ëŠ” js ì•ˆì—ì„œ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì§€ì •í–ˆìŠµë‹ˆë‹¤.

```jsx
import firebase from "firebase/app";
import "firebase/auth";
import "firebase/database";

const firebaseConfig = {
  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DPMAIN,
  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,
  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
};

const firebaseApp = firebase.initializeApp(firebaseConfig);

export const firebaseAuth = firebaseApp.auth();
export const firebaseDatabase = firebaseApp.database();
export const googleProvider = new firebase.auth.GoogleAuthProvider();
export const githubProvider = new firebase.auth.GithubAuthProvider();
```

- ê·¸ë¦¬ê³ , ì¸ì¦ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ë§Œì„ ë‹´ë‹¹í•˜ëŠ” auth_service.jsë¥¼ ë§Œë“  ë’¤ firebaseì—ì„œ importí•´ì˜¨ firebaseAuth, githubProvider, googleProvider ë“±ìœ¼ë¡œ í•´ë‹¹ auth service ë‚´ì—ì„œ classë¥¼ ì‘ì„±í•˜ê³  ê°ê°ì˜ ìš©ë„ì— ë§ëŠ” (ì¸ì¦)ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

![ezgif com-gif-maker - 2022-07-03T195727 001](https://user-images.githubusercontent.com/53133662/177036466-9163e6fe-16ca-4410-8602-52f2343cc911.gif)

```jsx
import { firebaseAuth, githubProvider, googleProvider } from "./firebase";

class AuthService {
  login(providerName) {
    const authProvider = this.getProvider(providerName);
    return firebaseAuth.signInWithPopup(authProvider);
  }

  logout() {
    firebaseAuth.signOut();
  }

  userLogin(onUserChanged) {
    firebaseAuth.onAuthStateChanged((user) => {
      onUserChanged(user);
    });
  }

  getProvider(providerName) {
    switch (providerName) {
      case "Google":
        return googleProvider;
      case "Github":
        return githubProvider;
      default:
        throw new Error(`not supported provider : ${providerName}`);
    }
  }
}

export default AuthService;
```

- ì¸ì¦ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ë§Œì„ ë‹´ë‹¹í•˜ëŠ” `auth_service.js` ì•ˆì—ì„œ ë¡œê·¸ì¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ê³  `firebase.js` ì—ì„œ import í•´ì˜¨ firebaseAuthì— `getProvider`ì™€ `signInWithPopup`(firebase)ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- Githubì™€ Google ì˜ ì¸ì¦ ì„œë¹„ìŠ¤ APIëŠ” `switch` ë¬¸ì„ í™œìš©í•˜ì—¬ ê°ê°ì˜ ì¸ìê°€ caseì™€ ë™ì¼í•˜ë©´ ê·¸ì— ë§ëŠ” í•´ë‹¹ ì†Œì…œ ì¸ì¦ API ëª…ë ¹ì–´ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

![1](https://user-images.githubusercontent.com/53133662/124862315-1a38b080-dff0-11eb-9088-0597ca340622.gif)

- ë¡œê·¸ì¸ ìœ ì§€ : `useEffect` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ `authService`ë¥¼ ë°›ì•„ì˜¬ ë•Œë§ˆë‹¤ `user`ê°€ ë“¤ì–´ì˜¨(ë¡œê·¸ì¸ì„ í•œ) ìƒíƒœì´ë©´, ìƒˆë¡œ í˜ì´ì§€ë¥¼ ì—´ì—ˆì„ ë•Œì—ë„ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ì´ ë˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì´ ì—­ì‹œ ì¸ì¦ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ë§Œì„ ë‹´ë‹¹í•˜ëŠ” `auth_service.js`ì˜ `class` ì—ì„œ `user`ê°€ ë¡œê·¸ì¸ì´ ë˜ì–´ìˆëŠ” ìƒíƒœì¸ì§€ë§Œì„ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ ë¡œì§ì— `onAuthStateChanged`(firebase)ë©”ì†Œë“œ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ì¡°ê±´ì‹ì„ í†µí•´ ë¡œê·¸ì¸ ì •ë³´ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì— `id` ê°’ì„ ë„£ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ë¡œê·¸ì•„ì›ƒ : firebase.js(firebase API)ì—ì„œ import í•´ì˜¨ firebaseAuthì— signOut(firebase)ë©”ì†Œë“œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì•„ì›ƒ ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<br />

#### 2) ì¹´ë“œ ë©”ì´ì»¤ : ì‹¤ì‹œê°„ ì •ë³´ ì…ë ¥

![8](https://user-images.githubusercontent.com/53133662/124868090-37727c80-dffa-11eb-8c51-f1db2d2f3077.gif)

- í•´ë‹¹ í¼ì„ ì…ë ¥í•˜ëŠ” íƒœê·¸ë§ˆë‹¤ `useRef()` ë¥¼ ì„¤ì •í•´ì¤€ ë’¤, `event.current.target`ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ í•´ë‹¹ cardì˜ `name` ê°’ì„ `value` ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë„ë¡ í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ ì½œë°± í•¨ìˆ˜ ë‚´ì—ì„œ `delete` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê³ , í•´ë‹¹ í¼ì„ ì…ë ¥í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— `props` ë¡œ í•¨ìˆ˜ë¥¼ ë³´ë‚´ delete ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì…ë ¥ í¼ ì¹´ë“œê°€ ì‚­ì œë˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

<br />

#### 3) ì¹´ë“œ ë©”ì´ì»¤ (ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„œë¹„ìŠ¤ Cloudinary)

> ì§„í–‰ê³¼ì • ì°¸ì¡° (íšŒê³ )
> [TIL. Cloudinaryë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë”©(1)](https://velog.io/@ichbinmin2/TIL.-Cloudinary%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%94%A91) > [TIL. Cloudinaryë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë”©(2)](https://velog.io/@ichbinmin2/TIL.-Cloudinary%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%94%A92-8k4iowy1)

![9](https://user-images.githubusercontent.com/53133662/124868194-625cd080-dffa-11eb-93a4-e1dc59d10b7a.gif)

- Cloudinaryë¥¼ ì ê·¹ í™œìš©í•˜ì—¬, ì´ë¯¸ì§€ ì—…ë¡œë”©ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```jsx
const url = process.env.REACT_APP_CLOUDINARY_API_KEY;
const name = process.env.REACT_APP_CLOUDINARY_PROJECT_NAME;

class ImageUploader {
  async imageUpload(file) {
    const data = new FormData();
    data.append("file", file);
    data.append("upload_preset", `${name}`);

    const result = await fetch(`${url}`, {
      method: "POST",
      body: data,
    });
    return await result.json();
  }
}

export default ImageUploader;
```

- ì´ë¯¸ì§€ ì—…ë¡œë” ê¸°ëŠ¥ë§Œì„ ë‹´ë‹¹í•˜ëŠ” `image_uploader.js` ì•ˆì—ì„œ `class` ë¥¼ ë§Œë“ ë’¤, ì´ë¯¸ì§€ ì—…ë¡œë” ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì´ë²¤íŠ¸ í•¨ìˆ˜ì™€ ì¡°ê±´ì‹ì„ í™œìš©í•˜ì—¬ cssë¡œ ë¡œë”©ìŠ¤í”¼ë„ˆë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

<br />

#### 4) ì¹´ë“œ ë©”ì´ì»¤ í˜ì´ì§€ (Firebase Realtime database)

> ì§„í–‰ê³¼ì • ì°¸ì¡° (íšŒê³ )
> [TIL. Firebaseë¥¼ ì´ìš©í•œ ì‹¤ì‹œê°„ ë°ì´í„° ë² ì´ìŠ¤ êµ¬í˜„](https://velog.io/@ichbinmin2/TIL.-Firebase%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%8B%A4%EC%8B%9C%EA%B0%84-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EA%B5%AC%ED%98%84)

![5](https://user-images.githubusercontent.com/53133662/124866444-65a28d00-dff7-11eb-9c84-a80475159b95.gif)

- firebaseì˜ ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œ ì¹´ë“œ ë©”ì´ì»¤ í˜ì´ì§€ì…ë‹ˆë‹¤.

```jsx
import { firebaseDatabase } from "./firebase";

class CardRepository {
  syncCards(userId, onUpdate) {
    const ref = firebaseDatabase.ref(`${userId}/cards`);
    ref.on("value", (snapshot) => {
      const value = snapshot.val();
      value && onUpdate(value);
    });
    return () => ref.off();
  }

  saveCard(userId, card) {
    firebaseDatabase.ref(`${userId}/cards/${card.id}`).set(card);
  }

  removeCard(userId, card) {
    firebaseDatabase.ref(`${userId}/cards/${card.id}`).remove();
  }
}

export default CardRepository;
```

- ì‹¤ì‹œê°„ ë°ì´í„° ì„œë¹„ìŠ¤ ê¸°ëŠ¥ë§Œì„ ë‹´ë‹¹í•˜ëŠ” `card_repository.js` ì•ˆì—ì„œ `class` ë¥¼ ë§Œë“ ë’¤, ë¡œê·¸ì¸ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ê³  `set`ì™€ `remove`(firebase)ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„° ì„œë¹„ìŠ¤ê°€ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„° ì €ì¥/ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<br />

#### 5) ì¹´ë“œ ë©”ì´ì»¤ í˜ì´ì§€ (Router í˜ì´ì§€ ì´ë™ ê¸°ëŠ¥ êµ¬í˜„)

![6](https://user-images.githubusercontent.com/53133662/124866739-da75c700-dff7-11eb-872b-39bb4061215b.gif)

- Routerì™€ useHistory()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬, í˜ì´ì§€ë¥¼ ì´ë™í•˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.

```jsx
        <Route exact path="/">
          <Main />
        </Route>
        <Route path="/board">
          <MainBoard
            authService={authService}
            FileInput={FileInput}
            cardRepository={cardRepository}
          />
        </Route>
```

<br />

#### 6) ë°˜ì‘í˜• ì›¹í˜ì´ì§€ êµ¬í˜„ ë° ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„

![7](https://user-images.githubusercontent.com/53133662/124866830-fc6f4980-dff7-11eb-9592-6e6b1cc96207.gif)

- @media screen ì„ ì´ìš©í•˜ì—¬ ë°˜ì‘í˜• ì‚¬ì´íŠ¸ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<br />
